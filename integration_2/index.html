<!DOCTYPE HTML>
<html lang="en">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
        <title>LevelUp API Documentation - Placing Orders | LevelUp API</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.css" media="screen">
	<script src="/js/epopup.js" language="JavaScript" type="text/javascript"></script>
	<link rel="icon" 
	      type="image/png" 
	      href="../favicon.ico">
    <!-- you don't need to keep this, but it's cool for stats! -->
    <!-- Le styles -->
    <link href="/css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 20px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
    </style>
    <link href="/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://twitter.github.com/bootstrap/assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://twitter.github.com/bootstrap/assets/ico/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://twitter.github.com/bootstrap/assets/ico/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="http://twitter.github.com/bootstrap/assets/ico/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="../img/favicon.ico">  
								<link type="text/css" rel="stylesheet" href="/css/hellobar.css" />
<script type="text/javascript" src="/js2/hellobar.js"></script>
<script language="JavaScript" type="text/javascript">
<!--
function Tog(x) {
var expandable = document.getElementById('expandable');
expandable.style.display = x;
}
// -->
</script>
</head>
  <body>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">
          <div class="well sidebar-nav">
            <ul class="nav nav-list">
              <li class="nav-header">LevelUp API Overview</li>
              <li><a href="../index.html">What is LevelUp?</a></li>
              <li><a href="/use_cases/index.html">Developer Use Cases</a></li>
              <li><a href="/dev_support/index.html">Developer Support</a></li>
              <li class="nav-header">Full API Documentation</li>
              <li><a href="/endpoints/index.html">Endpoints</a></li>
              <li class="nav-header">Transaction Flow</li>
              <li><a href="/transaction_flow/index.html">Transaction Flow</a></li>
              <li class="nav-header">Customer Data APIs</li>
              <li><a href="/customer_data/index.html">Customer Data APIs</a></li>
              <li class="nav-header">POS Integration</li>
              <li><a href="/integration_overview/index.html">Overview</a></li>
              <li><a href="/integration_1/index.html">Step 1 - Authentication</a></li>
              <li><a href="/integration_2/index.html">Step 2 - Orders & Refunds</a></li>
              <li><a href="/integration_3/index.html">Step 3 - Analytics and Testing</a></li>
              <li><a href="/dodont/index.html">Do's and Dont's</a></li>
              <li><a href="/scanner/index.html">LevelUp Scanner</a></li>
              <li><a href="/orders/index.html">Order Process</a></li>
              <li><a href="/integration_apis/index.html">Selected POS Integration APIs</a></li>
              <li class="nav-header">White Label App</li>
              <li><a href="/whitelabel_overview/index.html">Overview</a></li>
              <li><a href="/whitelabel_sdk_features/index.html">Features in SDK</a></li>
              <li><a href="/whitelabel_sample_app/index.html">Features in Sample App</a></li>
              <li class="nav-header">Web Ordering</li>
              <li><a href="/web_overview/index.html">Overview</a></li>
              <li><a href="/web_1/index.html">Step 1 - Web Payments JavaScript</a></li>
              <li><a href="/web_2/index.html">Step 2 - LevelUp Scanner Button</a></li>
              <li><a href="/web_3/index.html">Step 3 - (Optional) Notification</a></li>
              <li><a href="/web_4/index.html">Step 4 - Complete Transaction</a></li>
              <li><a href="/web_apis/index.html">Selected Web Ordering APIs</a></li>
              <li class="nav-header">Browsing Places</li>
              <li><a href="/browsing_overview/index.html">Overview</a></li>
              <li><a href="/browsing_1/index.html">Step 1 - Listing Merchants</a></li>
              <li><a href="/browsing_2/index.html">Step 2 - Listing Locations</a></li>
              <li><a href="/browsing_3/index.html">Step 3 - Specific Information</a></li>
              <li><a href="/browsing_4/index.html">Selected Browsing APIs</a></li>



                          </ul>
          </div><!--/.well -->
        </div><!--/span-->
        <div class="span9">
          <div class="hero-unit">
    <h1 id="placing-levelup-orders">Placing LevelUp Orders</h1>

<p><code>/merchants/:merchant_id/orders.json</code>
Creates and returns a new order.</p>

<p>Authentication Required: YES</p>

<p>Method: POST</p>

<h3 id="example">Example:</h3>

<pre><code>curl -d 'order[qr_code_data]=010001AV4ILKF22WSDF3X5G3HS010000&amp;order[spend]=0.01&amp;order[location_id]=1234&amp;order[items]=[{"sku":"5K0BKGBNPYW3R","name":"Coke Zero","upc":"049000042566","charged_price":"0.04","standard_price":"0.04"},{"sku":"48HDHOA919HA","name":"Ninja Uniform","upc":"052000031541","charged_price":"0.14","standard_price":"0.14"}]&amp;access_token=123456-ee0a7c2c7f907c7b9b2ee076333c8decdc7838d45b8d25ccb2be37b9ebb2adf3' https://api.thelevelup.com/v13/merchants/1234/orders.json
</code></pre>

<h3 id="response">Response:</h3>

<!--- <span title="Click to show reponse" class="expand" onClick="return ExpandToggle('response1')">__Click to view Response__</span>

<div id="response1" class="expandedblock" style="display:none"> -->

<pre><code>{
"order": {
	"created_at": "2012-10-24T11:04:32-04:00",
	"id": 1234567,
	"refunded_at": null,
	"state": "completed",
	"balance": {
		"amount": 0,
		"currency_code": "USD",
		"currency_symbol": "$",
		"formatted_amount": "0.00"
</code></pre>

<div id="expandable" style="overflow:hidden;display:none">


			},
		"credit": {
			"amount": 1,
			"currency_code": "USD",
			"currency_symbol": "$",
			"formatted_amount": "0.01"
		},
		"earn": {
			"amount": 0,
			"currency_code": "USD",
			"currency_symbol": "$",
			"formatted_amount": "0.00"
		},
		"unfunded_credit": {
			"amount": 1,
			"currency_code": "USD",
			"currency_symbol": "$",
			"formatted_amount": "0.01"
		},
		"spend": {
			"amount": 1,
			"currency_code": "USD",
			"currency_symbol": "$",
			"formatted_amount": "0.01"
		},
		"tip": {
			"amount": 0,
			"currency_code": "USD",
			"currency_symbol": "$",
			"formatted_amount": "0.00"
		},
		"total": {
			"amount": 1,
			"currency_code": "USD",
			"currency_symbol": "$",
			"formatted_amount": "0.01"
		},
		"location": {
			"id": 4418,
			"extended_address": "",
			"lat": "40.907783",
			"lng": "-79.924102",
			"locality": "Boston",
			"phone": "",
			"postal_code": "02114",
			"region": "MA",
			"street_address": "1234 Test Street"
		},
		"loyalty": {
			"orders_count": 2,
			"progress_percent": 0,
			"onboarding_eligible": false,
			"potential_credit": {
				"amount": 19999,
				"currency_code": "USD",
				"currency_symbol": "$",
				"formatted_amount": "199.99"
			},
			"savings": {
				"amount": 1,
				"currency_code": "USD",
				"currency_symbol": "$",
				"formatted_amount": "0.01"
			},
			"spend_remaining": {
				"amount": 9999,
				"currency_code": "USD",
				"currency_symbol": "$",
				"formatted_amount": "99.99"
			}
		},
		"merchant": {
			"id": 1234,
			"name": "API Example Merchant",
			"message_for_twitter": null,
			"public_url": "https://www.thelevelup.com/merchants/1234",
			"image_url_280x128_1x": "https://s3.amazonaws.com/levelup-production/merchants/1234/images/280x128_1x/fposlogo.png?1346946087",
			"image_url_280x128_1_5x": "https://s3.amazonaws.com/levelup-production/merchants/1234/images/280x128_1_5x/fposlogo.png?1346946087",
			"image_url_280x128_2x": "https://s3.amazonaws.com/levelup-production/merchants/1234/images/280x128_2x/fposlogo.png?1346946087",
			"image_url_290x335_1x": "https://s3.amazonaws.com/levelup-production/merchants/1234/images/290x335_1x/fposlogo.png?1346946087",
			"image_url_320x212_1x": "https://s3.amazonaws.com/levelup-production/merchants/1234/images/320x212_1x/fposlogo.png?1346946087",
			"image_url_320x212_1_5x": "https://s3.amazonaws.com/levelup-production/merchants/1234/images/320x212_1_5x/fposlogo.png?1346946087",
			"image_url_320x212_2x": "https://s3.amazonaws.com/levelup-production/merchants/1234/images/320x212_2x/fposlogo.png?1346946087",
			"image_url_400x235_1x": "https://s3.amazonaws.com/levelup-production/merchants/1234/images/400x235_1x/fposlogo.png?1346946087"
		},
		"user": {
			"able_to_refer": true,
			"first_name": "Example",
			"last_initial": "M"
		}
	}
}
<a href="javascript:Tog('none')">Less</a>
</div>
<p><br /><a href="javascript:Tog('block')">More</a></p>

<h2 id="url-parameters">URL Parameters</h2>

<p>The following parameters are in the URL.</p>

<dl>
  <dt>merchant_id</dt>
  <dd><em>Required</em> <strong>integer</strong> - The ID of the merchant that is posting the order.</dd>
</dl>

<h2 id="post-body-parameters">POST Body Parameters</h2>

<p>The following parameters are in the POST body and must be in application/x-www-form-urlencoded format.</p>

<dl>
  <dt>order[qr_code_data]</dt>
  <dd><em>Required</em> <strong>string</strong> - The scanner QR code data.</dd>
  <dt>order[spend]</dt>
  <dd><em>Required</em> <strong>decimal</strong> - A decimal value of the spend amount.  Spend must be greater than zero, otherwise the order will be rejected.

    <p>The spend should always include two decimal places, such as 2.99 (for even spends like 3.00, the decimal places should still be included).  The current server implementation will accept orders with more than two decimal digits, although digits past the first two will be dropped. For example, 2.999 would be treated as 2.99.  This behavior may change in the future, so it is strongly recommended that clients only send two decimal places.</p>

    <p>Spend must only contain numeric digits and a period.  Comma must not not be used for a thousands separator (in US localization rules) or for a decimal separator (for some international localization rules).</p>

    <p>The currency symbol must not be prefixed to the amount.</p>
  </dd>
  <dt>order[location_id]</dt>
  <dd><em>Required</em> <strong>integer</strong> - ID of the merchant&#8217;s location, which is obtained from the <code>/users/:id</code> GET endpoint. </dd>
  <dt>order[items]</dt>
  <dd><em>Required</em> <strong>JSON</strong> - A JSON object representing the items being purchased.  The JSON object contains a single root &#8220;items&#8221; element, which is an array of individual &#8220;item&#8221; elements.

    <p>Each &#8220;item&#8221; element much contain the following fields:</p>

    <p><strong>upc</strong> - the UPC of the item.</p>

    <p><strong>sku</strong> - An opaque field for the merchant&#8217;s internal item number for the item.</p>

    <p><strong>name</strong> - the name of the item.</p>

    <p><strong>quantity</strong> - An integer for the number of units purchased.  This must be greater than 0.  This must contain only digit characters.</p>

    <p><strong>standard_price</strong> - The normal price of one unit of the item.  Discounts are not included in this price.  For the format of this field, please follow the requirements described in order[spend].</p>

    <p><strong>charged_price</strong> - The price the customer was charged for all units of the item.  While this will often be equal to (standard_price * quantity), that may not always be the case.  For example, non-LevelUp price adjustments such as paper coupons, buy one get one free promotions, industry discounts, etc. may affect the charged_price.  For the format of this field, please follow the requirements described in order[spend].</p>

    <p><strong>description</strong> - An optional extended description of the item.</p>

    <p>An example JSON string: &#8216;[{&#8220;sku&#8221;:&#8221;2342&#8221;,&#8221;upc&#8221;:&#8221;abc123&#8221;,&#8221;name&#8221;:&#8221;Coca Cola&#8221;},{&#8220;sku&#8221;:&#8221;987654&#8221;,&#8221;upc&#8221;:&#8221;321zxy&#8221;,&#8221;name&#8221;:&#8221;Hamburger&#8221;,&#8221;description&#8221;:&#8221;Hamburger with fries&#8221;}]&#8217;</p>
  </dd>
  <dt>order[exemption]</dt>
  <dd><em>Optional</em> <strong>decimal</strong> - A decimal value indicating an amount of the order[spend] that is except from credit.  This field may only be used if the <code>/merchants/:id</code> endpoint response said that exemption_enabled is true.</dd>
  <dt>client_id</dt>
  <dd><em>Required</em> <strong>string</strong> - The OAuth 2.0 bearer token, as previously retrieved from <code>/oauth/access_tokens.json</code>.</dd>
</dl>

<h2 id="response-objects">Response Objects</h2>

<p>Here is a breakdown of the objects included in the response:</p>

<dl>
  <dt><code>"id":123456</code></dt>
  <dd>ID of the order, used for issuing refunds.</dd>
  <dt><code>"state":"completed"</code></dt>
  <dd>Order status (will only ever be &#8220;completed&#8221; or &#8220;refunded&#8221;).</dd>
  <dt><code>"balance":{"amount":0,"currency_code":"USD","currency_symbol":"$","formatted_amount":"0.00"},</code></dt>
  <dd>Amount that was billed to the customer&#8217;s credit card</dd>
  <dt><code>"credit":{"amount":5,"currency_code":"USD","currency_symbol":"$","formatted_amount":"0.05"},</code></dt>
  <dd>Amount of merchant credit that was used</dd>
  <dt><code>"earn":{"amount":0,"currency_code":"USD","currency_symbol":"$","formatted_amount":"0.00"},</code></dt>
  <dd>Amount of credit earned on this transaction</dd>
  <dt><code>"unfunded_credit":{"amount":0,"currency_code":"USD","currency_symbol":"$","formatted_amount":"0.00"},</code></dt>
  <dd>Amount of global (LevelUp-funded) credit used</dd>
  <dt><code>"spend":{"amount":5,"currency_code":"USD","currency_symbol":"$","formatted_amount":"0.05"},</code></dt>
  <dd>Order subtotal without tip</dd>
  <dt><code>"tip":{"amount":0,"currency_code":"USD","currency_symbol":"$","formatted_amount":"0.00"},</code></dt>
  <dd>Tip amount</dd>
  <dt><code>"total":{"amount":5,"currency_code":"USD","currency_symbol":"$","formatted_amount":"0.05"},</code></dt>
  <dd>Grand total spent through LevelUp</dd>
  <dt><code>"location":{"id":3796,"extended_address":"Ste 111","lat":"42.362733","lng":"-71.058461","locality":"Boston","phone":"","postal_code":"02114","region":"MA","street_address":"1 Congress St"},</code></dt>
  <dd>Location information</dd>
  <dt><code>"loyalty":{"orders_count":25,"progress_percent":11,</code></dt>
  <dd>Loyalty Progression</dd>
  <dt><code>"onboarding_eligible":false,</code></dt>
  <dd>Eligibility for first-time credit</dd>
  <dt><code>"potential_credit":{"amount":5105,"currency_code":"USD","currency_symbol":"$","formatted_amount":"51.05"},</code></dt>
  <dd>Global credit available</dd>
  <dt><code>"savings":{"amount":1199,"currency_code":"USD","currency_symbol":"$","formatted_amount":"11.99"},</code></dt>
  <dd>Savings at this merchant to-date</dd>
  <dt><code>"spend_remaining":{"amount":8801,"currency_code":"USD","currency_symbol":"$","formatted_amount":"88.01"}},</code></dt>
  <dd>Amount until unlocking next reward</dd>
</dl>

<hr />

<h1 id="issuing-refunds">Issuing Refunds</h1>

<h2 id="endpoint">Endpoint</h2>
<p><code>/orders/:id/refund.json</code></p>

<p>Refunds and returns an order. The resulting order will have &#8220;state&#8221;:&#8221;refunded&#8221;.  All refunds are for the full amount of the sale, there are no partial refunds through LevelUp.</p>

<p>Authentication Required: YES</p>

<p>Method: PUT</p>

<h2 id="example-1">Example</h2>

<pre><code>curl -i -X PUT -d "&amp;access_token=123456-ee0a7c2c7f907c7b9b2ee076333c8decdc7838d45b8d25ccb2be37b9ebb2adf3" https://api.thelevelup.com/v13/orders/1234567/refund.json
</code></pre>

<h2 id="response-1">Response</h2>

<pre><code>{
	"order": {
		"created_at": "2012-10-24T11:04:32-04:00",
		"id": 1234567,
		"refunded_at": "2012-10-24T11:05:14-04:00",
		"state": "refunded",
		"balance": {
			"amount": 0,
			"currency_code": "USD",
			"currency_symbol": "$",
			"formatted_amount": "0.00"
		},
		"credit": {
			"amount": 1,
			"currency_code": "USD",
			"currency_symbol": "$",
			"formatted_amount": "0.01"
		},
		"earn": {
			"amount": 0,
			"currency_code": "USD",
			"currency_symbol": "$",
			"formatted_amount": "0.00"
		},
		"unfunded_credit": {
			"amount": 1,
			"currency_code": "USD",
			"currency_symbol": "$",
			"formatted_amount": "0.01"
		},
		"spend": {
			"amount": 1,
			"currency_code": "USD",
			"currency_symbol": "$",
			"formatted_amount": "0.01"
		},
		"tip": {
			"amount": 0,
			"currency_code": "USD",
			"currency_symbol": "$",
			"formatted_amount": "0.00"
		},
		"total": {
			"amount": 1,
			"currency_code": "USD",
			"currency_symbol": "$",
			"formatted_amount": "0.01"
		},
		"location": {
			"id": 1234,
			"extended_address": "",
			"lat": "40.907783",
			"lng": "-79.924102",
			"locality": "Boston",
			"phone": "",
			"postal_code": "02114",
			"region": "MA",
			"street_address": "1234 Test Street"
		},
		"loyalty": {
			"orders_count": 2,
			"progress_percent": 0,
			"onboarding_eligible": false,
			"potential_credit": {
				"amount": 20000,
				"currency_code": "USD",
				"currency_symbol": "$",
				"formatted_amount": "200.00"
			},
			"savings": {
				"amount": 0,
				"currency_code": "USD",
				"currency_symbol": "$",
				"formatted_amount": "0.00"
			},
			"spend_remaining": {
				"amount": 10000,
				"currency_code": "USD",
				"currency_symbol": "$",
				"formatted_amount": "100.00"
			}
		},
		"merchant": {
			"id": 1234,
			"name": "Example Merchant",
			"message_for_twitter": null,
			"public_url": "https://www.thelevelup.com/merchants/1234",
			"image_url_280x128_1x": "https://s3.amazonaws.com/levelup-production/merchants/1234/images/280x128_1x/fposlogo.png?1346946087",
			"image_url_280x128_1_5x": "https://s3.amazonaws.com/levelup-production/merchants/1234/images/280x128_1_5x/fposlogo.png?1346946087",
			"image_url_280x128_2x": "https://s3.amazonaws.com/levelup-production/merchants/1234/images/280x128_2x/fposlogo.png?1346946087",
			"image_url_290x335_1x": "https://s3.amazonaws.com/levelup-production/merchants/1234/images/290x335_1x/fposlogo.png?1346946087",
			"image_url_320x212_1x": "https://s3.amazonaws.com/levelup-production/merchants/1234/images/320x212_1x/fposlogo.png?1346946087",
			"image_url_320x212_1_5x": "https://s3.amazonaws.com/levelup-production/merchants/1234/images/320x212_1_5x/fposlogo.png?1346946087",
			"image_url_320x212_2x": "https://s3.amazonaws.com/levelup-production/merchants/1234/images/320x212_2x/fposlogo.png?1346946087",
			"image_url_400x235_1x": "https://s3.amazonaws.com/levelup-production/merchants/1234/images/400x235_1x/fposlogo.png?1346946087"
		},
		"user": {
			"able_to_refer": true,
			"first_name": "Example",
			"last_initial": "M"
		}
	}
}
</code></pre>

<h2 id="parameters">Parameters</h2>

<dl>
  <dt>id</dt>
  <dd><em>Required</em> <strong>integer</strong> - The ID of the order to be refunded.</dd>
</dl>


            </div><!--/span-->
          </div><!--/row-->
        </div><!--/span-->
      </div><!--/row-->

      <hr>

      <footer>
        <p>© LevelUp 2012</p>
      </footer>

    </div><!--/.fluid-container-->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/js2/jquery.js"></script>
    <script src="/js2/bootstrap-transition.js"></script>
    <script src="/js2/bootstrap-alert.js"></script>
    <script src="/js2/bootstrap-modal.js"></script>
    <script src="/js2/bootstrap-dropdown.js"></script>
    <script src="/js2/bootstrap-scrollspy.js"></script>
    <script src="/js2/bootstrap-tab.js"></script>
    <script src="/js2/bootstrap-tooltip.js"></script>
    <script src="/js2/bootstrap-popover.js"></script>
    <script src="/js2/bootstrap-button.js"></script>
    <script src="/js2/bootstrap-collapse.js"></script>
    <script src="/js2/bootstrap-carousel.js"></script>
    <script src="/js2/bootstrap-typeahead.js"></script>
	<script type="text/javascript">
	    new HelloBar( "Welcome to the LevelUp API Documentation Site! -- Questions? Email <a href=mailto:pos@thelevelup.com>pos@thelevelup.com</a>", {
		showWait: 110,
		positioning: 'sticky',
		transition: 'bouncy',
		wiggleWait: 500,
		shadow: true,
		speed: 1000,
		texture: 'diagonal',
		tabSide: 'left',
		helloBarLogo: false,
		fontWeight: '500',
		}, 3.8 );
	</script>
  

</body></html>




