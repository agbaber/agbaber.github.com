<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta content="nanoc 3.6.7" name="generator">
<title>
LevelUp Development .:
Orders .: Refund
</title>
<link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900" media="screen" rel="stylesheet" type="text/css">
<link href="../../../styles.css" media="screen, projection" rel="stylesheet" type="text/css">
<link href="../../../images/icon.png" rel="shortcut icon" type="image/png">
</head>
<body>
<div class="main-nav">
<ul class="l-horizontal">
<li>
<a class="main-nav__button" href="https://www.thelevelup.com/">LevelUp</a>
</li>
<li class="l-right">
<a class="main-nav__button main-nav__button--right" href="http://support.thelevelup.com/">Support</a>
</li>
<li class="l-right">
<a class="main-nav__button main-nav__button--right" href="../../../getting-started/sign-up/">Join</a>
</li>
</ul>
</div>
<div class="l-wrap">
<div class="content">
<ul class="side-nav">
<li>
<a class="side-nav__button side-nav__button--getting-started" href="../../../">Platform Overview</a>
<ul class="side-nav__sub">
<li>
<ul>
<li class="side-nav__sub__link">
<a href="../../../">Overview</a>
</li>
</ul>
<ul></ul>
</li>
<li>
<ul>
<li class="side-nav__sub__link">
<a href="../../../getting-started/what-to-build/">What to Build</a>
</li>
</ul>
<ul></ul>
</li>
<li>
<ul>
<li class="side-nav__sub__link">
<a href="../../../getting-started/apis-sdks-libraries/">API, SDKs &amp; Libraries</a>
</li>
</ul>
<ul></ul>
</li>
<li>
<ul>
<li class="side-nav__sub__link">
<a href="../../../getting-started/permissions-list/">Permissions List</a>
</li>
</ul>
<ul></ul>
</li>
<li>
<ul>
<li class="side-nav__sub__link">
<a href="../../../getting-started/rules-of-the-road/">Rules of the Road</a>
</li>
</ul>
<ul></ul>
</li>
<li>
<ul>
<li class="side-nav__sub__link">
<a href="../../../getting-started/sign-up/">Sign Up</a>
</li>
</ul>
<ul></ul>
</li>
</ul>
</li>
<li class="is-active">
<a class="side-nav__button side-nav__button--api-reference" href="../../">API Reference</a>
<ul class="side-nav__sub">
<li>
<h5>
Getting Started
</h5>
<ul>
<li class="side-nav__sub__link">
<a href="../../">Requests &amp; Responses</a>
</li>
</ul>
</li>
<li>
<h5>
v15 .: BETA
</h5>
<ul><ul>
<li>
App Access Tokens
<ul>
<li class="side-nav__sub__link">
<a href="../../v15/app-access-tokens-create/">Create</a>
</li>
</ul>
</li>
<li>
Credit Cards
<ul>
<li class="side-nav__sub__link">
<a href="../../v15/credit-cards-create/">Create</a>
</li>
</ul>
</li>
<li>
Merchant-Funded Credit
<ul>
<li class="side-nav__sub__link">
<a href="../../v15/merchant-funded-credit-give/">Give</a>
</li>
</ul>
</li>
<li>
Orders
<ul>
<li class="side-nav__sub__link">
<a href="../../v15/orders-create/">Create</a>
</li>
<li class="side-nav__sub__link">
<a href="../../v15/orders-refunds/">Refund</a>
</li>
<li class="side-nav__sub__link">
<a href="../../v15/user-orders-list/">List</a>
</li>
</ul>
</li>
<li>
Permissions
<ul>
<li class="side-nav__sub__link">
<a href="../../v15/permissions-create/">Create</a>
</li>
<li class="side-nav__sub__link">
<a href="../../v15/permissions-request-show/">Show</a>
</li>
</ul>
</li>
<li>
QR Codes
<ul>
<li class="side-nav__sub__link">
<a href="../../v15/qr-codes-get/">Get</a>
</li>
</ul>
</li>
<li>
User Addresses
<ul>
<li class="side-nav__sub__link">
<a href="../../v15/user-addresses-create/">Create</a>
</li>
<li class="side-nav__sub__link">
<a href="../../v15/user-addresses-show/">List</a>
</li>
</ul>
</li>
<li>
Users
<ul>
<li class="side-nav__sub__link">
<a href="../../v15/app-users-create/">Create</a>
</li>
<li class="side-nav__sub__link">
<a href="../../v15/user-show/">Get</a>
</li>
</ul>
</li>
</ul></ul>
</li>
<li>
<h5>
v14
</h5>
<ul><ul>
<li>
Access Tokens
<ul>
<li class="side-nav__sub__link">
<a href="../access-tokens-create/">Create</a>
</li>
</ul>
</li>
<li>
Campaigns
<ul>
<li class="side-nav__sub__link">
<a href="../campaigns-view-details/">Get Details</a>
</li>
<li class="side-nav__sub__link">
<a href="../campaigns-claim/">Claim</a>
</li>
<li class="side-nav__sub__link">
<a href="../campaigns-view-by-cohort/">Get by Cohort</a>
</li>
<li class="side-nav__sub__link">
<a href="../campaign-claim-legacy/">Claim Legacy</a>
</li>
<li class="side-nav__sub__link">
<a href="../campaign-get-merchant-id/">Get Merchant ID</a>
</li>
<li class="side-nav__sub__link">
<a href="../campaign-get-image/">Get Image</a>
</li>
</ul>
</li>
<li>
Credit Cards
<ul>
<li class="side-nav__sub__link">
<a href="../credit-cards-create/">Create</a>
</li>
<li class="side-nav__sub__link">
<a href="../credit-cards-list/">List</a>
</li>
<li class="side-nav__sub__link">
<a href="../credit-cards-promote/">Promote</a>
</li>
<li class="side-nav__sub__link">
<a href="../credit-cards-delete/">Delete</a>
</li>
</ul>
</li>
<li>
Detached Refunds
<ul>
<li class="side-nav__sub__link">
<a href="../detached-refunds-create/">Create</a>
</li>
</ul>
</li>
<li>
Interstitials
<ul>
<li class="side-nav__sub__link">
<a href="../interstitials/">Get</a>
</li>
</ul>
</li>
<li>
Locations
<ul>
<li class="side-nav__sub__link">
<a href="../locations-list-all/">List</a>
</li>
<li class="side-nav__sub__link">
<a href="../locations-list-by-app/">List by App</a>
</li>
<li class="side-nav__sub__link">
<a href="../locations-list-by-merchant/">List by Merchant</a>
</li>
<li class="side-nav__sub__link">
<a href="../locations-show-image/">Get Image</a>
</li>
<li class="side-nav__sub__link">
<a href="../locations-show-details/">Get Details</a>
</li>
</ul>
</li>
<li>
Loyalty
<ul>
<li class="side-nav__sub__link">
<a href="../loyalties/">Get</a>
</li>
</ul>
</li>
<li>
Orders
<ul>
<li class="side-nav__sub__link">
<a href="../orders-by-app/">List by App</a>
</li>
<li class="side-nav__sub__link">
<a href="../orders-by-location/">List By Location</a>
</li>
<li class="side-nav__sub__link">
<a href="../orders-create/">Create</a>
</li>
<li class="side-nav__sub__link">
<a href="../orders-merchant-details/">Get Merchant Details</a>
</li>
<li class="side-nav__sub__link">
<span class="active" title="You're here.">Refund</span>
</li>
<li class="side-nav__sub__link">
<a href="../orders-user-details/">Get User Details</a>
</li>
</ul>
</li>
<li>
Payment Tokens
<ul>
<li class="side-nav__sub__link">
<a href="../payment-tokens/">Get</a>
</li>
</ul>
</li>
<li>
Support Tickets
<ul>
<li class="side-nav__sub__link">
<a href="../support-tickets/">Create</a>
</li>
</ul>
</li>
<li>
Users
<ul>
<li class="side-nav__sub__link">
<a href="../users-create/">Create</a>
</li>
<li class="side-nav__sub__link">
<a href="../users-show-addresses/">List Addresses</a>
</li>
<li class="side-nav__sub__link">
<a href="../users-show/">Get Details</a>
</li>
<li class="side-nav__sub__link">
<a href="../users-update/">Update</a>
</li>
<li class="side-nav__sub__link">
<a href="../users-reset-password/">Reset Password</a>
</li>
<li class="side-nav__sub__link">
<a href="../users-custom-attributes/">Custom Attributes</a>
</li>
</ul>
</li>
</ul></ul>
</li>
</ul>
</li>
<li>
<a class="side-nav__button side-nav__button--mobile-sdk" href="../../../mobile-sdks/">Mobile SDK</a>
<ul class="side-nav__sub">
<li>
<h5>
Getting Started
</h5>
<ul>
<li class="side-nav__sub__link">
<a href="../../../mobile-sdks/">Overview</a>
</li>
<li class="side-nav__sub__link">
<a href="../../../mobile-sdks/getting-started/rules-of-the-road/">Rules of the Road</a>
</li>
<li class="side-nav__sub__link">
<a href="../../../mobile-sdks/getting-started/ios/">Getting Started: iOS</a>
</li>
<li class="side-nav__sub__link">
<a href="../../../mobile-sdks/getting-started/android/">Getting Started: Android</a>
</li>
</ul>
</li>
<li>
<h5>
Core Concepts
</h5>
<ul>
<li class="side-nav__sub__link">
<a href="../../../mobile-sdks/core-concepts/deep-link-auth/">Deep Link Auth</a>
</li>
<li class="side-nav__sub__link">
<a href="../../../mobile-sdks/core-concepts/login/">Login</a>
</li>
<li class="side-nav__sub__link">
<a href="../../../mobile-sdks/core-concepts/register/">Register</a>
</li>
<li class="side-nav__sub__link">
<a href="../../../mobile-sdks/core-concepts/manage-cards/">Manage Cards</a>
</li>
<li class="side-nav__sub__link">
<a href="../../../mobile-sdks/core-concepts/payment/">Payment</a>
</li>
</ul>
</li>
<li>
<h5>
Additional Concepts
</h5>
<ul>
<li class="side-nav__sub__link">
<a href="../../../mobile-sdks/additional-concepts/locations/">Locations</a>
</li>
<li class="side-nav__sub__link">
<a href="../../../mobile-sdks/additional-concepts/loyalty/">Loyalty</a>
</li>
<li class="side-nav__sub__link">
<a href="../../../mobile-sdks/additional-concepts/order-history/">Order History</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a class="side-nav__button side-nav__button--pos-integration" href="../../../pos-integration/">POS Integration</a>
<ul class="side-nav__sub">
<li>
<h5>
Getting Started
</h5>
<ul>
<li class="side-nav__sub__link">
<a href="../../../pos-integration/">Overview</a>
</li>
<li class="side-nav__sub__link">
<a href="../../../pos-integration/getting-started/developer-setup/">Developer Setup</a>
</li>
</ul>
</li>
<li>
<h5>
Core Concepts
</h5>
<ul>
<li class="side-nav__sub__link">
<a href="../../../pos-integration/core-concepts/configuring-merchants/">Configuring Merchants</a>
</li>
<li class="side-nav__sub__link">
<a href="../../../pos-integration/core-concepts/processing-transactions/">Processing Transactions</a>
</li>
<li class="side-nav__sub__link">
<a href="../../../pos-integration/core-concepts/handling-refunds/">Handling Refunds</a>
</li>
<li class="side-nav__sub__link">
<a href="../../../pos-integration/core-concepts/consumer-flow/">Consumer Flow</a>
</li>
</ul>
</li>
<li>
<h5>
Additional Concepts
</h5>
<ul>
<li class="side-nav__sub__link">
<a href="../../../pos-integration/additional-concepts/common-questions/">Common Questions</a>
</li>
</ul>
</li>
<li>
<h5>
Integration SDK
</h5>
<ul>
<li class="side-nav__sub__link">
<a href="../../../pos-integration/integration-sdks/overview/">Overview</a>
</li>
<li class="side-nav__sub__link">
<a href="../../../pos-integration/integration-sdks/rules-of-the-road/">Rules of the Road</a>
</li>
<li class="side-nav__sub__link">
<a href="../../../pos-integration/integration-sdks/c-sharp/">Getting Started: C# &amp; .NET</a>
</li>
</ul>
</li>
<li>
<h5>
Certification &amp; Residuals
</h5>
<ul>
<li class="side-nav__sub__link">
<a href="../../../pos-integration/certification-residuals/overview/">Overview</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a class="side-nav__button side-nav__button--online-ordering" href="../../../online-ordering/">Mobile &amp; E-Commerce</a>
<ul class="side-nav__sub">
<li>
<h5>
Getting Started
</h5>
<ul>
<li class="side-nav__sub__link">
<a href="../../../online-ordering/">Overview</a>
</li>
<li class="side-nav__sub__link">
<a href="../../../online-ordering/getting-started/developer-setup/">Developer Setup</a>
</li>
</ul>
</li>
<li>
<h5>
Sample UX Flows
</h5>
<ul>
<li class="side-nav__sub__link">
<a href="../../../online-ordering/sample-ux-flows/levelup-as-payment/">LevelUp as Payment</a>
</li>
<li class="side-nav__sub__link">
<a href="../../../online-ordering/sample-ux-flows/levelup-as-login/">LevelUp as Login</a>
</li>
<li class="side-nav__sub__link">
<a href="../../../online-ordering/sample-ux-flows/levelup-as-account-of-record/">LevelUp as Account of Record</a>
</li>
<li class="side-nav__sub__link">
<a href="../../../online-ordering/sample-ux-flows/embedded-flow/">Embedded Flow</a>
</li>
</ul>
</li>
<li>
<h5>
Core Concepts
</h5>
<ul>
<li class="side-nav__sub__link">
<a href="../../../online-ordering/core-concepts/merchant-permissions/">Merchant Permissions</a>
</li>
<li class="side-nav__sub__link">
<a href="../../../online-ordering/core-concepts/user-flow/">User Flow</a>
</li>
<li class="side-nav__sub__link">
<a href="../../../online-ordering/core-concepts/user-permissions/">User Permissions</a>
</li>
<li class="side-nav__sub__link">
<a href="../../../online-ordering/core-concepts/processing-transactions/">Processing Transactions</a>
</li>
<li class="side-nav__sub__link">
<a href="../../../online-ordering/core-concepts/handling-refunds/">Handling Refunds</a>
</li>
<li class="side-nav__sub__link">
<a href="../../../online-ordering/core-concepts/common-questions/">Common Questions</a>
</li>
<li class="side-nav__sub__link">
<a href="../../../online-ordering/core-concepts/showcasing-savings/">Showcasing Savings</a>
</li>
</ul>
</li>
<li>
<h5>
Certification &amp; Residuals
</h5>
<ul>
<li class="side-nav__sub__link">
<a href="../../../online-ordering/certification-residuals/overview/">Overview</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="documentation">
<div class="documentation__header">
<div class="l-horizontal">
<h4>
Orders .: Refund
</h4>
<h4 class="documentation__header--section l-right">
API Reference / v14
</h4>
</div>
</div>
<div class="documentation__content">
<h2>Refund an Order</h2>

<p>This endpoint refunds an order and returns it with a non-null <code>refunded_at</code> key and other
merchant-facing data.</p>

<h3>Request Endpoint</h3>

<div class="http-request">
  <span class="http-verb">POST</span> /v14/orders/:uuid/refund
</div>

<h3>Authentication Required â€“ Merchant Token in Header</h3>
<div class="highlight"><pre><span class="n">Authorization</span><span class="o">:</span> <span class="n">token</span> <span class="mi">123456</span><span class="o">-</span><span class="mi">75489120749</span><span class="o">...</span>
</pre></div>
<h3>Request Body (If <code>manager_confirmation</code> exists for merchant.  Note: this is uncommon.)</h3>
<div class="highlight"><pre><span class="p">{</span>
  <span class="nt">"refund"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"manager_confirmation"</span><span class="p">:</span> <span class="s2">"87168"</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<h3>Request Parameters</h3>

<table>
<thead><tr>
<th>Param</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr></thead>
<tbody><tr>
<td><code>manager_confirmation</code></td>
<td>String</td>
<td>No</td>
<td>If the merchant uses one, the manager confirmation code used to authorize the refund.</td>
</tr></tbody>
</table>
<h3>cURL Example</h3>
<div class="highlight"><pre>curl -X POST -H Accept:application/json -H Content-Type:application/json -H Authorization:<span class="s2">"token 123456-75489120749..."</span> -d <span class="s1">'{"refund": {"manager_confirmation": "87168"}}'</span> https://api.thelevelup.com/v14/orders/1esfba10ac51013149f162d2f425c456/refund
</pre></div>
<h3>Example Response</h3>

<p><code>HTTP/1.1 200 OK</code></p>
<div class="highlight"><pre><span class="p">{</span>
  <span class="nt">"order"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"created_at"</span><span class="p">:</span> <span class="s2">"2014-01-01T00:00:00-04:00"</span><span class="p">,</span>
    <span class="nt">"merchant_funded_credit_amount"</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="nt">"earn_amount"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">"uuid"</span><span class="p">:</span> <span class="s2">"393b75b0806011e29e960800200c9a66"</span><span class="p">,</span>
    <span class="nt">"loyalty_id"</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="nt">"spend_amount"</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="nt">"refunded_at"</span><span class="p">:</span> <span class="s2">"2014-01-01T00:00:00-04:00"</span><span class="p">,</span>
    <span class="nt">"tip_amount"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">"total_amount"</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="nt">"location_id"</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="nt">"user_display_name"</span><span class="p">:</span> <span class="s2">"Ryan T"</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<h3>Response Parameters</h3>

<table>
<thead><tr>
<th>Parameters</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><code>created_at</code></td>
<td>String</td>
<td>Time when the order was created in ISO standard format 8601</td>
</tr>
<tr>
<td><code>merchant_funded_credit_amount</code></td>
<td>Integer</td>
<td>Merchant-funded credit used on order</td>
</tr>
<tr>
<td><code>earn_amount</code></td>
<td>Integer</td>
<td>Credit unlocked on order</td>
</tr>
<tr>
<td><code>uuid</code></td>
<td>String</td>
<td>UUID for the order</td>
</tr>
<tr>
<td><code>loyalty_id</code></td>
<td>Integer</td>
<td>ID for LevelUp user at that merchant</td>
</tr>
<tr>
<td><code>spend_amount</code></td>
<td>Integer</td>
<td>Amount requested for payment (in cents).</td>
</tr>
<tr>
<td><code>refunded_at</code></td>
<td>String</td>
<td>Time when the order was refunded in ISO standard format 8601</td>
</tr>
<tr>
<td><code>tip_amount</code></td>
<td>Integer</td>
<td>Tip amount (in cents)</td>
</tr>
<tr>
<td><code>total_amount</code></td>
<td>Integer</td>
<td>Total amount including tip (in cents)</td>
</tr>
<tr>
<td><code>location_id</code></td>
<td>Integer</td>
<td>Location id where the order was created</td>
</tr>
<tr>
<td><code>user_display_name</code></td>
<td>String</td>
<td>First name and last initial of customer</td>
</tr>
</tbody>
</table>
<h3>Errors</h3>

<h4>If the order does not exist</h4>

<p><code>HTTP/1.1 404 Not Found</code></p>

<p>(Empty response body.)</p>

<h4>If the order is unable to be refunded, perhaps because the order has already been refunded or because the original processing of the order failed to complete</h4>

<p><code>HTTP/1.1 422 Unprocessable Entity</code></p>
<div class="highlight"><pre><span class="p">[{</span>
  <span class="nt">"error"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"object"</span><span class="p">:</span> <span class="s2">"order"</span><span class="p">,</span>
    <span class="nt">"property"</span><span class="p">:</span> <span class="s2">"base"</span><span class="p">,</span>
    <span class="nt">"message"</span><span class="p">:</span> <span class="s2">"The refund was unsuccessful. Perhaps this order has already been refunded or was unsuccessful."</span>
  <span class="p">}</span>
<span class="p">}]</span>
</pre></div>
<h4>If the manager confirmation is incorrect</h4>

<p><code>HTTP/1.1 422 Unprocessable Entity</code></p>
<div class="highlight"><pre><span class="p">[{</span>
  <span class="nt">"error"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"object"</span><span class="p">:</span> <span class="s2">"refund"</span><span class="p">,</span>
    <span class="nt">"property"</span><span class="p">:</span> <span class="s2">"manager_confirmation"</span><span class="p">,</span>
    <span class="nt">"message"</span><span class="p">:</span> <span class="s2">"Manager confirmation was incorrect."</span>
  <span class="p">}</span>
<span class="p">}]</span>
</pre></div>
</div>
</div>
<div class="l-clearfix"></div>
</div>
</div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script><script src="../../../scripts.js"></script><script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-6677962-51']);
  _gaq.push(['_setDomainName', 'developer.thelevelup.com']);
  _gaq.push(['_trackPageview']);
  
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</body>
</html>
