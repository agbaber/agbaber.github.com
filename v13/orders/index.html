<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta http-equiv="Content-Language" content="en-us" />
  <meta http-equiv="imagetoolbar" content="false" />
  <meta name="MSSmartTagsPreventParsing" content="true" />
  <title>Placing Orders | LevelUp API</title>
  <link rel="alternate" type="application/atom+xml" title="API Changes" href="/changes.atom" />
  <link href="/css/reset.css" rel="stylesheet" type="text/css" />
  <link href="/css/960.css" rel="stylesheet" type="text/css" />
  <link href="/css/uv_active4d.css" rel="stylesheet" type="text/css" />
  <link href="/shared/css/documentation.css" media="screen" rel="stylesheet" type="text/css">
  <link href="/shared/css/pygments.css" media="screen" rel="stylesheet" type="text/css">
  <script src="/shared/js/jquery.js" type="text/javascript"></script>
  <script src="/shared/js/documentation.js" type="text/javascript"></script>
</head>
<body class="api">
    <div id="header-wrapper">
      <div id="header">
        <div>
          <a class="logo" href="/"><img src="/images/logo_developer.png" width="255" height="45" alt="LevelUp:Developer" /></a>
          <ul class="nav">
            <li><a href="/v13/">API v13</a></li>
            <li><a href="/changes/">Changes</a></li>
            <li><a
              href="https://support.thelevelup.com">Support</a></li>
            <li><a href="/changes.atom">
              <img src="/images/feed-icon-28x28.png" width="16" height="16" alt="LevelUp API Changes Feed" />
            </a></li>
          </ul>
        </div>
      </div><!-- #header -->
    </div><!-- #header-wrapper -->

    <div id="wrapper">
      <div class="content">
    <h1 id="placing-levelup-orders">Placing LevelUp Orders</h1>

<p><code>/merchants/:merchant_id/orders.json</code>
Creates and returns a new order.</p>

<p>Authentication Required: YES</p>

<p>Method: POST</p>

<h3 id="example">Example:</h3>

<pre><code>curl -d 'order[qr_code_data]=010001AV4ILKF22WSDF3X5G3HS010000&amp;order[spend]=0.01&amp;order[location_id]=1234&amp;order[items]=[{"sku":"5K0BKGBNPYW3R","name":"Coke Zero","upc":"049000042566","charged_price":"0.04","standard_price":"0.04"},{"sku":"48HDHOA919HA","name":"Ninja Uniform","upc":"052000031541","charged_price":"0.14","standard_price":"0.14"}]&amp;access_token=123456-ee0a7c2c7f907c7b9b2ee076333c8decdc7838d45b8d25ccb2be37b9ebb2adf3' https://api.thelevelup.com/v13/merchants/1234/orders.json
</code></pre>

<h3 id="response">Response:</h3>

<pre><code>{
"order": {
	"created_at": "2012-10-24T11:04:32-04:00",
	"id": 1234567,
	"refunded_at": null,
	"state": "completed",
	"balance": {
		"amount": 0,
		"currency_code": "USD",
		"currency_symbol": "$",
		"formatted_amount": "0.00"
	},
	"credit": {
		"amount": 1,
		"currency_code": "USD",
		"currency_symbol": "$",
		"formatted_amount": "0.01"
	},
	"earn": {
		"amount": 0,
		"currency_code": "USD",
		"currency_symbol": "$",
		"formatted_amount": "0.00"
	},
	"unfunded_credit": {
		"amount": 1,
		"currency_code": "USD",
		"currency_symbol": "$",
		"formatted_amount": "0.01"
	},
	"spend": {
		"amount": 1,
		"currency_code": "USD",
		"currency_symbol": "$",
		"formatted_amount": "0.01"
	},
	"tip": {
		"amount": 0,
		"currency_code": "USD",
		"currency_symbol": "$",
		"formatted_amount": "0.00"
	},
	"total": {
		"amount": 1,
		"currency_code": "USD",
		"currency_symbol": "$",
		"formatted_amount": "0.01"
	},
	"location": {
		"id": 4418,
		"extended_address": "",
		"lat": "40.907783",
		"lng": "-79.924102",
		"locality": "Boston",
		"phone": "",
		"postal_code": "02114",
		"region": "MA",
		"street_address": "1234 Test Street"
	},
	"loyalty": {
		"orders_count": 2,
		"progress_percent": 0,
		"onboarding_eligible": false,
		"potential_credit": {
			"amount": 19999,
			"currency_code": "USD",
			"currency_symbol": "$",
			"formatted_amount": "199.99"
		},
		"savings": {
			"amount": 1,
			"currency_code": "USD",
			"currency_symbol": "$",
			"formatted_amount": "0.01"
		},
		"spend_remaining": {
			"amount": 9999,
			"currency_code": "USD",
			"currency_symbol": "$",
			"formatted_amount": "99.99"
		}
	},
	"merchant": {
		"id": 1234,
		"name": "API Example Merchant",
		"message_for_twitter": null,
		"public_url": "https://www.thelevelup.com/merchants/1234",
		"image_url_280x128_1x": "https://s3.amazonaws.com/levelup-production/merchants/1234/images/280x128_1x/fposlogo.png?1346946087",
		"image_url_280x128_1_5x": "https://s3.amazonaws.com/levelup-production/merchants/1234/images/280x128_1_5x/fposlogo.png?1346946087",
		"image_url_280x128_2x": "https://s3.amazonaws.com/levelup-production/merchants/1234/images/280x128_2x/fposlogo.png?1346946087",
		"image_url_290x335_1x": "https://s3.amazonaws.com/levelup-production/merchants/1234/images/290x335_1x/fposlogo.png?1346946087",
		"image_url_320x212_1x": "https://s3.amazonaws.com/levelup-production/merchants/1234/images/320x212_1x/fposlogo.png?1346946087",
		"image_url_320x212_1_5x": "https://s3.amazonaws.com/levelup-production/merchants/1234/images/320x212_1_5x/fposlogo.png?1346946087",
		"image_url_320x212_2x": "https://s3.amazonaws.com/levelup-production/merchants/1234/images/320x212_2x/fposlogo.png?1346946087",
		"image_url_400x235_1x": "https://s3.amazonaws.com/levelup-production/merchants/1234/images/400x235_1x/fposlogo.png?1346946087"
	},
	"user": {
		"able_to_refer": true,
		"first_name": "Example",
		"last_initial": "M"
	}
} }
</code></pre>

<h2 id="url-parameters">URL Parameters</h2>

<p>The following parameters are in the URL.</p>

<dl>
<dt>merchant_id</dt>
  <dd>
<em>Required</em> <strong>integer</strong> - The ID of the merchant that is posting the order.</dd>
</dl><h2 id="post-body-parameters">POST Body Parameters</h2>

<p>The following parameters are in the POST body and must be in application/x-www-form-urlencoded format.</p>

<dl>
<dt>order[qr_code_data]</dt>
  <dd>
<em>Required</em> <strong>string</strong> - The scanner QR code data.</dd>
  <dt>order[spend]</dt>
  <dd>
<em>Required</em> <strong>decimal</strong> - A decimal value of the spend amount.  Spend must be greater than zero, otherwise the order will be rejected.

    <p>The spend should always include two decimal places, such as 2.99 (for even spends like 3.00, the decimal places should still be included).  The current server implementation will accept orders with more than two decimal digits, although digits past the first two will be dropped. For example, 2.999 would be treated as 2.99.  This behavior may change in the future, so it is strongly recommended that clients only send two decimal places.</p>

    <p>Spend must only contain numeric digits and a period.  Comma must not not be used for a thousands separator (in US localization rules) or for a decimal separator (for some international localization rules).</p>

    <p>The currency symbol must not be prefixed to the amount.</p>
  </dd>
  <dt>order[location_id]</dt>
  <dd>
<em>Required</em> <strong>integer</strong> - ID of the merchant’s location, which is obtained from the <code>/users/:id</code> GET endpoint. </dd>
  <dt>order[items]</dt>
  <dd>
<em>Required</em> <strong>JSON</strong> - A JSON object representing the items being purchased.  The JSON object contains a single root “items” element, which is an array of individual “item” elements.

    <p>Each “item” element much contain the following fields:</p>

    <p><strong>upc</strong> - the UPC of the item.</p>

    <p><strong>sku</strong> - An opaque field for the merchant’s internal item number for the item.</p>

    <p><strong>name</strong> - the name of the item.</p>

    <p><strong>quantity</strong> - An integer for the number of units purchased.  This must be greater than 0.  This must contain only digit characters.</p>

    <p><strong>standard_price</strong> - The normal price of one unit of the item.  Discounts are not included in this price.  For the format of this field, please follow the requirements described in order[spend].</p>

    <p><strong>charged_price</strong> - The price the customer was charged for all units of the item.  While this will often be equal to (standard_price * quantity), that may not always be the case.  For example, non-LevelUp price adjustments such as paper coupons, buy one get one free promotions, industry discounts, etc. may affect the charged_price.  For the format of this field, please follow the requirements described in order[spend].</p>

    <p><strong>description</strong> - An optional extended description of the item.</p>

    <p>An example JSON string: ‘[{“sku”:”2342”,”upc”:”abc123”,”name”:”Coca Cola”},{“sku”:”987654”,”upc”:”321zxy”,”name”:”Hamburger”,”description”:”Hamburger with fries”}]’</p>
  </dd>
  <dt>order[exemption]</dt>
  <dd>
<em>Optional</em> <strong>decimal</strong> - A decimal value indicating an amount of the order[spend] that is except from credit.  This field may only be used if the <code>/merchants/:id</code> endpoint response said that exemption_enabled is true.</dd>
  <dt>client_id</dt>
  <dd>
<em>Required</em> <strong>string</strong> - The OAuth 2.0 bearer token, as previously retrieved from <code>/oauth/access_tokens.json</code>.</dd>
</dl><h2 id="response-objects">Response Objects</h2>

<p>Here is a breakdown of the objects included in the response:</p>

<dl>
<dt><code>"id":123456</code></dt>
  <dd>ID of the order, used for issuing refunds.</dd>
  <dt><code>"state":"completed"</code></dt>
  <dd>Order status (will only ever be “completed” or “refunded”).</dd>
  <dt><code>"balance":{"amount":0,"currency_code":"USD","currency_symbol":"$","formatted_amount":"0.00"},</code></dt>
  <dd>Amount that was billed to the customer’s credit card</dd>
  <dt><code>"credit":{"amount":5,"currency_code":"USD","currency_symbol":"$","formatted_amount":"0.05"},</code></dt>
  <dd>Amount of merchant credit that was used</dd>
  <dt><code>"earn":{"amount":0,"currency_code":"USD","currency_symbol":"$","formatted_amount":"0.00"},</code></dt>
  <dd>Amount of credit earned on this transaction</dd>
  <dt><code>"unfunded_credit":{"amount":0,"currency_code":"USD","currency_symbol":"$","formatted_amount":"0.00"},</code></dt>
  <dd>Amount of global (LevelUp-funded) credit used</dd>
  <dt><code>"spend":{"amount":5,"currency_code":"USD","currency_symbol":"$","formatted_amount":"0.05"},</code></dt>
  <dd>Order subtotal without tip</dd>
  <dt><code>"tip":{"amount":0,"currency_code":"USD","currency_symbol":"$","formatted_amount":"0.00"},</code></dt>
  <dd>Tip amount</dd>
  <dt><code>"total":{"amount":5,"currency_code":"USD","currency_symbol":"$","formatted_amount":"0.05"},</code></dt>
  <dd>Grand total spent through LevelUp</dd>
  <dt><code>"location":{"id":3796,"extended_address":"Ste 111","lat":"42.362733","lng":"-71.058461","locality":"Boston","phone":"","postal_code":"02114","region":"MA","street_address":"1 Congress St"},</code></dt>
  <dd>Location information</dd>
  <dt><code>"loyalty":{"orders_count":25,"progress_percent":11,</code></dt>
  <dd>Loyalty Progression</dd>
  <dt><code>"onboarding_eligible":false,</code></dt>
  <dd>Eligibility for first-time credit</dd>
  <dt><code>"potential_credit":{"amount":5105,"currency_code":"USD","currency_symbol":"$","formatted_amount":"51.05"},</code></dt>
  <dd>Global credit available</dd>
  <dt><code>"savings":{"amount":1199,"currency_code":"USD","currency_symbol":"$","formatted_amount":"11.99"},</code></dt>
  <dd>Savings at this merchant to-date</dd>
  <dt><code>"spend_remaining":{"amount":8801,"currency_code":"USD","currency_symbol":"$","formatted_amount":"88.01"}},</code></dt>
  <dd>Amount until unlocking next reward</dd>
</dl>
      </div>

    <div id="js-sidebar" class="sidebar-shell">
      <div class="js-toggle-list sidebar-module expandable">
        <ul>
			<li class="js-topic">
	            <h3><a href="#" class="js-expand-btn collapsed">&nbsp;</a><a href="/">Home</a></h3>
	            <ul class="js-guides">
	            </ul>
	          </li>
          <li class="js-topic">
            <h3><a href="#" class="js-expand-btn collapsed">&nbsp;</a><a href="/v13/">API Overview</a></h3>
            <ul class="js-guides">
		          <li><a href="/v13/home/uexperience/">User Experience</a></li>
		          <li><a href="/v13/home/mexperience/">Merchant Experience</a></li>
				  <li><a href="/v13/home/n00b/">Don't Be A N00b</a></li>
            </ul>
          </li>
          <li class="js-topic">
            <h3><a href="#" class="js-expand-btn collapsed">&nbsp;</a><a href="/v13/oauth/">OAuth</a></h3>
            <ul class="js-guides">
            </ul>
          </li>
          <li class="js-topic">
            <h3><a href="#" class="js-expand-btn collapsed">&nbsp;</a><a href="/v13/location/">Merchant ID and Location ID</a></h3>
            <ul class="js-guides">
            </ul>
          </li>
          <li class="js-topic">
            <h3><a href="#" class="js-expand-btn collapsed">&nbsp;</a><a href="/v13/scanning/">Scanning QR Codes</a></h3>
            <ul class="js-guides">
              <li><a href="/v13/scanning/luscanner/">LevelUp Scanner</a></li>
              <li><a href="/v13/scanning/socketmobile/">Socket Mobile</a></li>
            </ul>
          </li>
          <li class="js-topic">
            <h3><a href="#" class="js-expand-btn collapsed">&nbsp;</a><a href="/v13/orders/">Placing Orders</a></h3>
            <ul class="js-guides">
            <li><a href="/v13/orders/offline/">Offline Mode</a></li>
           </ul>
          </li>
          <li class="js-topic">
            <h3><a href="#" class="js-expand-btn collapsed">&nbsp;</a><a href="/v13/refunds/">Issuing Refunds</a></h3>
            <ul class="js-guides">
            </ul>
          </li>
       </h3></li>
        </ul>
      </div> <!-- /sidebar-module -->
    </div><!-- /sidebar-shell -->

    </div><!-- #wrapper -->


    <script type="text/javascript">
      var _gauges = _gauges || [];
      (function() {
        var t   = document.createElement('script');
        t.type  = 'text/javascript';
        t.async = true;
        t.id    = 'gauges-tracker';
        t.setAttribute('data-site-id', '4f2038e0cb25bc1b55000003');
        t.src = '//secure.gaug.es/track.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(t, s);
      })();
    </script>
</body>
</html>
